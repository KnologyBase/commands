<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.2  (Win32)">
	<META NAME="AUTHOR" CONTENT="Mike Jang">
	<META NAME="CREATED" CONTENT="20110302;9300000">
	<META NAME="CHANGEDBY" CONTENT="LeeAnn Pickrell">
	<META NAME="CHANGED" CONTENT="20110517;11474200">
	<META NAME="Originator" CONTENT="Microsoft Word 14">
	<META NAME="ProgId" CONTENT="Word.Document">
	<STYLE TYPE="text/css">
	<!--
		P { color: #000000; widows: 2; orphans: 2 }
		P.western { so-language: en-US }
		P.cjk { so-language: zh-CN }
		P.ctl { so-language: ar-SA }
		A.western:link { so-language: zxx }
		A.ctl:link { so-language: zxx }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" TEXT="#000000" DIR="LTR">
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><FONT SIZE=3><B>LABS</B></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in">During the Red Hat
exams, the tasks will be presented electronically. Therefore, this
book presents most of the labs electronically as well. For more
information, see the Lab Questions section toward the end of Chapter
2.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><B>Lab
2</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in">In this lab, you'll
clone the system created in Lab 1. Use the techniques discussed in
this chapter to clone that system. That process can be completed
either at the command line interface with the <B>virt-clone </B>command
or with the Virtual Machine Manager.</P>
<P CLASS="western" STYLE="margin-bottom: 0in">In addition, when
rebooting the system, you'll want to set this system up as the
clone1.example.org system on the 192.168.100.50 IP address. You can
substitute a different IP address as long as it's on a different
network from the server1.example.com system.</P>
<P CLASS="western" STYLE="margin-bottom: 0in">When a system is
cloned, it carries everything from the previous system. So the first
time you boot a cloned system, it's best to boot it into a runlevel
that does not start networking. Runlevel 1 is best for that purpose.
For more information on runlevels and network configuration, see
Chapters 3 and 5.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><B>Lab
3</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in">Use the <B>virt-install
</B>command to create a new system. Use the model described in
Chapter 1 for the tester1.example.com system, with an IP address of
192.168.122.150.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><B>Lab
4</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in">In this lab, you'll
modify the Kickstart file created on the server1.example.com VM in
Lab 1. It's the anaconda-ks.cfg file in the root user's home
directory. That file will be used to automate the installation of a
system on a virtual machine. Unless you've already created it, the
system will be tester1.example.com on IP address 192.168.122.150. If
you've set up the server1.example.com system on a different network,
make sure the tester1.example.com system is on the same network.
Remember the lessons of the chapter when modifying that file. Here
are a few hints:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">1.
Change the <B>network </B>directive to set the new system to an
appropriate IP address and hostname.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">2.
Make sure the partition directives are active. Change them as needed
to make sure a size is specified. If partition devices are named
directly, that can lead to problems.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">3.
Configure the system to shut down after installation is complete.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">4.
Don't be afraid of some trial and error. If the installation stops
during the process, check the messages in different virtual consoles.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">5.
Copy the Kickstart to the installation directory created in Chapter
1. Use the techniques discussed in that chapter to make sure the
Kickstart file matches the SELinux context of other files in that
directory.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">6.
Create a new KVM-based VM, using the techniques discussed in the
chapter.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">7.
Boot the system from the RHEL 6 network boot CD.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">8.
At the boot screen, highlight the Install Or Upgrade An Existing
System option and press TAB.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">9.
Add the <B>ks</B> directive along with the URL of the network
installation source created in Chapter 1.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">10.
Press ENTER. The installation should now proceed to completion,
without intervention.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">11.
If the installation stops during the process, make notes on where it
stopped. The screens available during the installation process can
help. To access those screens, press CTRL-ALT-F3, CTRL-ALT-F4, and
CTRL-ALT-F5. To return to the main installation screen, press ALT-F6
(ALT-F1 if you're using the text-based installation program).</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">12.
Match the stopping point with the appropriate entry in the Kickstart
configuration file.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">13.
Modify the Kickstart configuration file, and rerun the
Kickstart-based installation.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><B>Lab
5</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in">In this lab, you'll
modify the Kickstart file created on the server1.example.com VM in
Labs 1 and 4, for use by the <B>virt-install </B>command. Unless
you've already created it, the system will be outsider1.example.org
on IP address 192.168.100.100. (If that IP address network is in use
by another component such as a cable &ldquo;modem,&quot; another IP
address such as 192.168.101.100 is acceptable.) As discussed in the
chapter, the <B>virt-install </B>command uses the more standard sda
device for virtual hard drives, instead of the vda device associated
with the Virtual Machine Manager. You'll have to change the Kickstart
file accordingly.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><B>Lab
6</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in">In this lab, you'll
test a Secure Shell client on any and all virtual machines that
you've created. Hopefully, you'll remember the root administrative
password configured during the installation process.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">1.
To see how the system works, first run the command on the local
system with the following command (if desired, substitute 127.0.0.1
for localhost).</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt"># ssh
localhost</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">2.
Proceed with the login to the localhost system. Log out with the <B>exit
</B>command.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">3.
Review the current known hosts for the system with the <B>cat
~/.ssh/known_hosts </B>command. The file may appear incomprehensible,
but you'll see a line such as the following near the end of the file,
which refers to the public RSA key from the localhost system.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt">localhost</FONT></FONT>
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt">ssh-rsa
dsaf34sfdajlk....</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">4.
Repeat the process with a remote system such as server1.example.com,
or the equivalent IP address such as 192.168.122.50. After returning
to the local system, what do you see added to the known_hosts file?
(Direct connections to the server1.example.com system may not work
until you've set up the /etc/hosts file as discussed in Chapter 3.)</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%"><A NAME="Instant1"></A>
5. This step requires access to the GUI on a local system and GUI
applications on the remote system. If you've followed the
instructions so far in Chapters 1 and 2, you'll have a number of
systems that meet these requirements. With that in mind, log in to
the noted remote system from a local GUI-based command line with the
following command (substitute an appropriate hostname or IP address
as needed).</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt"># ssh -X
root@192.168.122.50</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">6.
Now try to open a GUI application on the remote system, perhaps even
the Firefox Web browser (if that's installed) with the <B>firefox</B>
command. To confirm success, look at the title bar of the window that
appears. It should display a message with the location of the remote
application, such as:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt">Welcome to
Firefox - Mozilla Firefox (on server1.example.com)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">7.
Exit from the remote application and then exit from the remote
system.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><B>Lab
7</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">In
this lab, you'll perform three tasks associated with one of the VMs
created in previous labs</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">1.
Start a VM from the command line.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">2.
Stop a VM from the command line. 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">3.
Configure that VM from the command line.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">You
may recognize these tasks from the RHCSA objectives. The process
should be fairly simple. First, take account of currently configured
VMs with the following command:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt"># virsh
list --all</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">From
the VMs that appear in the output, pick one that isn't currently
running. If the server1.example.com system is not running, start it.
Confirm that it is currently running. Use the <B>ssh</B> command to
access a remote console on that VM system.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Now
from the command line of the host physical system, stop that virtual
console. What command actually performs the task? Confirm the result
with the <B>virsh</B> <B>list --all </B>command.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Now,
if you want to set up the server1.example.com system to start
automatically during the boot process, run the following command:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt"># virsh
autostart server1.example.com</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">To
confirm the change, review the contents of the
/etc/libvirt/qemu/autostart directory. Next, enter the VM system and
run the <B>ifconfig</B> command to confirm the IP address of that VMs
network card. If you've configured this particular
server1.example.com system per the instructions discussed in Chapter
1, that IP address should be 192.168.122.50.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Now
power down any currently running VMs, and reboot the physical host
system. When the system boots again, log in to the local host system.
Don't start any hypervisors. Run the <B>ssh</B> commands described in
Lab 7. If it works, then you should be able to connect to the VM as
if it were a remote system.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Exit
from the remote system and run the <B>virsh</B> <B>list --all
</B>command. You should see output similar to:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt">Id Name
State<BR><BR>----------------------------------<BR><BR>4
server1.example.com running</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Now
power down the remote system. You can <B>ssh</B> again into the
remote system and run the <B>poweroff</B> command directly from
there. Run the <B>exit </B>command immediately, or just wait until
the VM has had a chance to shut down. Now how do you reverse the
process, so this system does not start the next time you reboot the
physical host system?</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><B>Lab
8</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">In
this lab, you'll use the commands described at the end of Chapter 2
to test connections to available services. If you've created the
network installation servers described in Chapter 1, there will be at
least FTP and HTTP servers active on those systems. The default ports
for these services are 21 and 80, respectively. Try the <B>telnet
localhost 21 </B>command on a local system, where the vsFTP service
is active. Look at the following output:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt">Trying
127.0.0.1...<BR>Connected to localhost.<BR>Escape character is
'^]'.<BR>220 (vsFTPd 2.2.2)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Now
exit from the local connection. Confirm the IP address of the local
system with the <B>ifconfig</B> <B>eth0 </B>command. It should be an
address such as 192.168.122.50. Log in to a remote VM such as
tester1.example.org with a command like <B>ssh</B>
<B>root@192.168.122.150</B>. Now try the same command again from that
remote system; for example, for the server1.example.com system on IP
address 192.168.122.50, run the following command:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt"># telnet
192.168.122.50 21</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Do
you get a &quot;connection refused&quot; or a &quot;no route to host&quot;
message? What do each of those messages mean? It's acceptable if
you're not certain about how to address this issue now, as firewalls
are not covered until Chapter 4.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Now
try <B>nmap</B> on the local system with the following command:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt"># nmap
localhost</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; line-height: 100%">Now
from the tester1.example.com system, review what other systems on the
local network can see from the following command. Pay attention to
the differences. That will give you hints on what services are
blocked by firewalls. Those firewalls may go beyond that configured
with the iptables command discussed in Chapter 4.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: none; padding: 0in; line-height: 100%">
<FONT FACE="Courier"><FONT SIZE=2 STYLE="font-size: 11pt"># nmap
192.168.122.50</FONT></FONT></P>
</BODY>
</HTML>